(this["webpackJsonpcamera-access-using-getusermedia"]=this["webpackJsonpcamera-access-using-getusermedia"]||[]).push([[0],{15:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(6),r=c(2),a=(c(15),c(3)),i=c(7),o=(c(4),c(0)),l=function(e){var t=e.handleCamera,c=Object(n.useState)("null"),s=Object(r.a)(c,2),l=s[0],b=s[1],u=Object(n.useState)(!0),d=Object(r.a)(u,2),j=(d[0],d[1]),m=Object(n.useCallback)((function(){j("visible"===document.visibilityState)}),[]);return Object(n.useEffect)((function(){return alert(),document.addEventListener("visibilitychange",m),function(){document.removeEventListener("visibilitychange",m)}}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:t=e.sent,b("granted"),console.log("Camera permission granted"),t.getTracks().forEach((function(e){return e.stop()})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"NotAllowedError"===e.t0.name?(b("blocked"),console.log("Camera permission is blocked")):(b("prompt"),console.log("Camera permission prompt is likely shown"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}console.log(l),function(){e.apply(this,arguments)}()})),Object(o.jsxs)("div",{className:"camera-screen",children:["null"===l&&Object(o.jsx)("p",{children:"Checking camera permissions..."}),"granted"===l&&Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Camera permission is already granted"}),Object(o.jsx)("button",{onClick:t,children:"Back"})]}),"blocked"===l&&Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Camera permission is already blocked. Please allow camera access in your browser settings"}),Object(o.jsx)("button",{onClick:t,children:"Back"})]}),"prompt"===l&&Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Camera permission is set to prompt. Please allow access through your browser settings"}),Object(o.jsx)("button",{children:"Grant access"}),Object(o.jsx)("button",{onClick:t,children:"Back"})]})]})};function b(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),c=t[0],s=t[1],a=function(){s(!c)};return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("button",{className:"btn",onClick:a,children:"Camera Access"}),c?Object(o.jsx)(l,{handleCamera:a}):null]})}var u=document.getElementById("root");Object(s.createRoot)(u).render(Object(o.jsx)(n.StrictMode,{children:Object(o.jsx)(b,{})}))}},[[17,1,2]]]);
//# sourceMappingURL=main.ebf2a9be.chunk.js.map